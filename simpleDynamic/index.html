<!DOCTYPE html>
<html>
    <head>
        <title>Simple CSS Q3 Reflection with Dynamic Questions</title>
        <!-- This meta tag make the text scale correctly on desktop AND mobile browsers. -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- This link and 2 scripts load the Bootstrap CSS stylesheet -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>
    
    <body>
        <nav class="navbar navbar-expand-md navbar-dark bg-primary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Advanced CS Reflection</a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#myNavbar">
                    <span class="navbar-toggler-icon"></span> 
                </button>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav">
                        <li><a class="nav-link" href="Responses.html">Responses</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        
        <br>

        <div class="container-fluid">
            <div id="set0" class="alert alert-danger" role="alert">
                HI! Your email address (MISSING?!?!) will be recorded when you submit this form. Not you? Switch account
                * Required
            </div>

            <form id="set1">
                <div class="form-group">
                    <label for="knowledge">How has your knowledge and understanding of computer systems changed during this class? *</label>
                    <textarea class="form-control" id="knowledge" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="skills">How have your programming skills changed during this class? *</label>
                    <textarea class="form-control" id="skills" rows="3"></textarea>
                </div>

                <button type="button" class="btn btn-primary btn-lg btn-block" id="next1" onclick="displayNextQuestions(1)">Next</button>
                <br>
            </form>

            <form id="set2" style="display:none;">
                <div class="form-group">
                    <label for="different">How are networked programs different than the programs you've written before? How do you manage the complexity introduced by this difference? *</label>
                    <textarea class="form-control" id="different" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="accomplishment">Describe an accomplishment in this class that you are proud of. *</label>
                    <textarea class="form-control" id="accomplishment" rows="3"></textarea>
                </div>

                <button type="button" class="btn btn-primary btn-lg btn-block" id="next2" onclick="displayNextQuestions(2)">Next</button>
                <br>
            </form>

            <form id="set3" style="display:none;">
                <div class="form-group">
                    <label for="improve">Identify a skill or understanding that you would like to improve. *</label>
                    <textarea class="form-control" id="improve" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="collaborate">Describe your ability to collaborate on program development and how that has changed during this class. *</label>
                    <textarea class="form-control" id="collaborate" rows="3"></textarea>
                </div>

                <button type="button" class="btn btn-primary btn-lg btn-block" id="next3" onclick="displayNextQuestions(3)">Next</button>
                <br>
            </form>

            <form id="set4" style="display:none;">
                <div class="form-group">
                    <label for="feedback">Feedback for Mr. Hernandez: *</label>
                    <textarea class="form-control" id="feedback" rows="3"></textarea>
                </div>

                <button type="button" class="btn btn-primary btn-lg btn-block" id="next4" onclick="done()">Submit</button>
                <br>
            </form>

            <form id="set5" style="display:none;">
                <div class="form-group">
                    <label for="whyNoFeedback">Why did you not leave feedback for Mr. Hernandez? *</label>
                    <textarea class="form-control" id="whyNoFeedback" rows="3"></textarea>
                </div>

                <button type="button" class="btn btn-primary btn-lg btn-block" onclick="done()">Submit</button>
                <br>
            </form>

            <div id="thanks" name="thanks" class="alert alert-primary" role="alert" style="display:none;">
                Thanks for submitting your answers to this form.
            </div>
        </div>

        <script>

            function displayNextQuestions(set) {
                // set is which set of questions was just displayed
                if (set > 0 && set < 5) {
                    // stop displaying the current next button 
                    var lastButton = document.getElementById("next"+set);
                    lastButton.style.display = "none";
                    // start displaying the next set (questions+button)
                    var nextQuestions = document.getElementById("set"+(set+1));
                    nextQuestions.style.display = "block";

                    // automatically scroll down to new questions
                    window.location = "#set"+(set+1);
                }
            }

            function done() {
                // Require feedback or explanation for no feedback
                var feedbackAnswer = document.getElementById("feedback").value;
                if (feedbackAnswer === "" || feedbackAnswer.toLowerCase() === "n/a") {
                    var whyNoFeedbackAnswer = document.getElementById("whyNoFeedback").value;
                    if (whyNoFeedbackAnswer === "") {
                        displayNextQuestions(4);
                        return;
                    }
                }

                // let user know that these answers are DISAPPEARING FOREVER
                alert('Where do these answers get stored?');
                // stop displaying all of the alerts, questions, and buttons 
                for (var i = 0; i < 6; i = i + 1) {
                    var nextQuestions = document.getElementById("set"+i);
                    nextQuestions.style.display = "none";
                }
                // start displaying the thanks alert
                var thanksAlert = document.getElementById("thanks");
                thanksAlert.style.display = "block";
            }

        </script>

    </body>
</html>